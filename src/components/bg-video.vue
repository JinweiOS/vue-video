<template>
  <div class="container">
    <!-- <van-skeleton title :row="20" :loading="viedoLoadFinsh">    </van-skeleton> -->
    <full-page
      ref="fullpage"
      :options="options"
      id="fullpage"
      @click.native="interact"
    >
      <div class="section" id="sectionOne">
        <!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ -->
        <div class="desc">
          <div class="desc-title">Vue.js</div>
          <div class="desc-content">
            ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ï¼Œä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVueè¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vueçš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚
          </div>
        </div>
        <div class="avatar" @click.stop="viewInfo">
          <el-avatar :size="70" :src="require('../assets/vue.png')"></el-avatar>
          <span class="logo-base">Vue.js</span>
        </div>
        <div
          class="love-btn"
          :class="{ 'shake-hard': shakeHand }"
          @click.stop="loveIt"
        >
          <svg
            t="1651912015322"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3548"
            width="48"
            height="48"
          >
            <path
              d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"
              fill="#F489B5"
              p-id="3549"
            ></path>
            <path
              d="M544 341.76c-88.32-133.12-266.24-55.04-266.24 90.88 0 99.84 88.32 168.96 156.16 222.72 48.64 39.68 71.68 56.32 89.6 71.68 11.52 10.24 28.16 10.24 39.68 0 17.92-15.36 42.24-33.28 90.88-71.68 67.84-51.2 156.16-124.16 156.16-222.72 2.56-145.92-176.64-225.28-266.24-90.88z"
              fill="#FFFFFF"
              opacity=".5"
              p-id="3550"
            ></path>
            <path
              d="M454.4 398.08c-80.64-120.32-240.64-49.92-240.64 81.92 0 89.6 80.64 152.32 140.8 200.96 43.52 35.84 65.28 51.2 80.64 64 10.24 8.96 25.6 8.96 35.84 0 16.64-12.8 37.12-29.44 81.92-64 61.44-46.08 140.8-111.36 140.8-200.96 2.56-131.84-158.72-203.52-239.36-81.92z"
              fill="#FFFFFF"
              p-id="3551"
            ></path>
          </svg>
          <span class="logo-base">{{ loveCount }}</span>
        </div>
        <!-- <van-popup
          v-model="information"
          position="bottom"
          :style="{ height: '50%' }"
          >asdsafds<iframe src="https://www.baidu.com"></iframe
        ></van-popup> -->
      </div>
      <div class="section" id="sectionTwo">
        <div class="desc">
          <div class="desc-title">React</div>
          <div class="desc-content">
            æ— è®ºä½ ç°åœ¨ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆï¼Œåœ¨æ— éœ€é‡å†™ç°æœ‰ä»£ç çš„å‰æä¸‹ï¼Œé€šè¿‡å¼•å…¥ React
            æ¥å¼€å‘æ–°åŠŸèƒ½ã€‚React è¿˜å¯ä»¥ä½¿ç”¨ Node è¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œæˆ–ä½¿ç”¨ React
            Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚
          </div>
        </div>
        <div class="avatar" @click="viewInfo">
          <el-avatar
            :size="70"
            :src="require('../assets/react.png')"
          ></el-avatar>
          <span class="logo-base">React</span>
        </div>
        <div
          class="love-btn"
          :class="{ 'shake-hard': shakeHand }"
          @click.stop="loveIt"
        >
          <svg
            t="1651912015322"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3548"
            width="48"
            height="48"
          >
            <path
              d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"
              fill="#F489B5"
              p-id="3549"
            ></path>
            <path
              d="M544 341.76c-88.32-133.12-266.24-55.04-266.24 90.88 0 99.84 88.32 168.96 156.16 222.72 48.64 39.68 71.68 56.32 89.6 71.68 11.52 10.24 28.16 10.24 39.68 0 17.92-15.36 42.24-33.28 90.88-71.68 67.84-51.2 156.16-124.16 156.16-222.72 2.56-145.92-176.64-225.28-266.24-90.88z"
              fill="#FFFFFF"
              opacity=".5"
              p-id="3550"
            ></path>
            <path
              d="M454.4 398.08c-80.64-120.32-240.64-49.92-240.64 81.92 0 89.6 80.64 152.32 140.8 200.96 43.52 35.84 65.28 51.2 80.64 64 10.24 8.96 25.6 8.96 35.84 0 16.64-12.8 37.12-29.44 81.92-64 61.44-46.08 140.8-111.36 140.8-200.96 2.56-131.84-158.72-203.52-239.36-81.92z"
              fill="#FFFFFF"
              p-id="3551"
            ></path>
          </svg>
          <span class="logo-base">200</span>
        </div>
        <!-- <van-popup
          v-model="information"
          position="bottom"
          :style="{ height: '50%' }"
          >{{ content }}</van-popup
        > -->
      </div>
      <div class="section" id="sectionThree">
        <div class="section" id="sectionTwo">
          <div class="desc">
            <div class="desc-title">Rescript</div>
            <div class="desc-content">
              ReScript is a robustly typed language that compiles to efficient
              and human-readable JavaScript. It comes with a lightning fast
              compiler toolchain that scales to any codebase size.
            </div>
          </div>
        </div>
        <div class="avatar" @click="viewInfo">
          <el-avatar
            :size="70"
            :src="require('../assets/rescript.png')"
          ></el-avatar>
          <span class="logo-base">Rescript</span>
        </div>
        <div
          class="love-btn"
          :class="{ 'shake-hard': shakeHand }"
          @click.stop="loveIt"
        >
          <svg
            t="1651912015322"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3548"
            width="48"
            height="48"
          >
            <path
              d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"
              fill="#F489B5"
              p-id="3549"
            ></path>
            <path
              d="M544 341.76c-88.32-133.12-266.24-55.04-266.24 90.88 0 99.84 88.32 168.96 156.16 222.72 48.64 39.68 71.68 56.32 89.6 71.68 11.52 10.24 28.16 10.24 39.68 0 17.92-15.36 42.24-33.28 90.88-71.68 67.84-51.2 156.16-124.16 156.16-222.72 2.56-145.92-176.64-225.28-266.24-90.88z"
              fill="#FFFFFF"
              opacity=".5"
              p-id="3550"
            ></path>
            <path
              d="M454.4 398.08c-80.64-120.32-240.64-49.92-240.64 81.92 0 89.6 80.64 152.32 140.8 200.96 43.52 35.84 65.28 51.2 80.64 64 10.24 8.96 25.6 8.96 35.84 0 16.64-12.8 37.12-29.44 81.92-64 61.44-46.08 140.8-111.36 140.8-200.96 2.56-131.84-158.72-203.52-239.36-81.92z"
              fill="#FFFFFF"
              p-id="3551"
            ></path>
          </svg>
          <span class="logo-base">200</span>
        </div>
        <!-- <van-popup
          v-model="information"
          position="bottom"
          :style="{ height: '50%' }"
          >{{ content }}</van-popup
        > -->
      </div>
      <div class="section" id="sectionFour">
        <div class="avatar" @click="viewInfo">
          <el-avatar
            :size="70"
            :src="require('../assets/myinfo.jpg')"
          ></el-avatar>
          <span class="logo-base">Vue.js</span>
        </div>
        <div
          class="love-btn"
          :class="{ 'shake-hard': shakeHand }"
          @click.stop="loveIt"
        >
          <svg
            t="1651912015322"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3548"
            width="48"
            height="48"
          >
            <path
              d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z"
              fill="#F489B5"
              p-id="3549"
            ></path>
            <path
              d="M544 341.76c-88.32-133.12-266.24-55.04-266.24 90.88 0 99.84 88.32 168.96 156.16 222.72 48.64 39.68 71.68 56.32 89.6 71.68 11.52 10.24 28.16 10.24 39.68 0 17.92-15.36 42.24-33.28 90.88-71.68 67.84-51.2 156.16-124.16 156.16-222.72 2.56-145.92-176.64-225.28-266.24-90.88z"
              fill="#FFFFFF"
              opacity=".5"
              p-id="3550"
            ></path>
            <path
              d="M454.4 398.08c-80.64-120.32-240.64-49.92-240.64 81.92 0 89.6 80.64 152.32 140.8 200.96 43.52 35.84 65.28 51.2 80.64 64 10.24 8.96 25.6 8.96 35.84 0 16.64-12.8 37.12-29.44 81.92-64 61.44-46.08 140.8-111.36 140.8-200.96 2.56-131.84-158.72-203.52-239.36-81.92z"
              fill="#FFFFFF"
              p-id="3551"
            ></path>
          </svg>
          <span class="logo-base">200</span>
        </div>
        <!-- <van-popup
          v-model="information"
          position="bottom"
          :style="{ height: '50%' }"
          >{{ content }}</van-popup
        > -->
      </div>
      <div class="section" id="sectionFive">
        <van-form @submit="onSubmit">
          <van-field
            v-model="form.name"
            name="ç”¨æˆ·å"
            label="ç”¨æˆ·å"
            placeholder="ä¾‹å¦‚: é©¬è¶…/å¦²å·±/åè£”/é•œ"
            :rules="[{ validatorName, message: 'ä¸è¦è¶…è¿‡10ä¸ªå­—ç¬¦å“¦~' }]"
          />
          <van-field
            v-model="form.email"
            name="ç”¨æˆ·å"
            label="ç”¨æˆ·å"
            placeholder="ä¾‹å¦‚: xxx@email.com"
            :rules="[{ validatorEmail, message: 'ä¸è¦è¶…è¿‡10ä¸ªå­—ç¬¦å“¦~' }]"
          />
          <van-field
            v-model="form.QQ"
            type="password"
            name="å¯†ç "
            label="å¯†ç "
            placeholder="ä¾‹å¦‚: 7491481843"
            :rules="[{ validatorQQ, message: 'ä¸è¦è¶…è¿‡10ä¸ªå­—ç¬¦å“¦~' }]"
          />
          <div style="margin: 16px">
            <van-button round block type="info" native-type="submit"
              >æäº¤</van-button
            >
          </div>
        </van-form>
      </div>
    </full-page>
  </div>
</template>

<script>
import axios from "axios";
import qs from "qs";
export default {
  name: "BackgroudVideo",
  data: function () {
    return {
      shakeHand: false,
      loveCount: 0,
      msgs: [
        "ğŸ˜€å¾ˆé«˜å…´è®¤è¯†ä½ å‘¢~æˆ‘å«ç§‹é¢œğŸ‚",
        "æœ‰ä½ ğŸ¥°åœ¨ï¼Œæ»¡å¤©éƒ½æ˜¯æ˜Ÿæ˜Ÿ&#10024;&#10024;",
        "å¤©è¿™ä¹ˆçƒ­ï¼è¦ä¸ä½ æ¥ç‚¹è¥¿ç“œğŸ‰ğŸ‰",
      ],
      content: "",
      contentSource: [""],
      localIconPath: ["../assets/qrcode.png"],
      viedoLoadFinsh: false,
      information: false,
      options: {},
      form: {
        name: "",
        email: "",
        QQ: "",
      },
      isLoading: false,
      fullPage: [
        "sectionOne",
        "sectionTwo",
        "sectionThree",
        "sectionFour",
        "sectionFive",
      ],
      videoPlayers: [],
      videoUrls: [
        "https://23126342.s21v.faiusr.com/58/ABUIABA6GAAggvTYkwYo2P6g3gM.mp4",
        "https://23126342.s21v.faiusr.com/58/ABUIABA6GAAggvTYkwYooMD47gY.mp4",
        "https://23126342.s21v.faiusr.com/58/ABUIABA6GAAggvTYkwYokq_Q2Ac.mp4",
      ],
    };
  },
  async mounted() {
    // æ’­æ”¾å™¨åˆå§‹åŒ–
    const Aliplayer = await this.getPlay();
    for (let i = 0; i < this.videoUrls.length; i++) {
      const playerIntance = new Aliplayer({
        id: this.fullPage[i],
        source: this.videoUrls[i], //æ’­æ”¾åœ°å€ï¼Œå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹ç›´æ’­åœ°å€ï¼Œæˆ–é˜¿é‡Œäº‘ç›´æ’­æœåŠ¡ä¸­çš„æ‹‰æµåœ°å€ã€‚
        isLive: false, //æ˜¯å¦ä¸ºç›´æ’­æ’­æ”¾ã€‚
        rePlay: true, // é‡å¤æ’­æ”¾
        autoplay: true,
      });
      this.videoPlayers.push(playerIntance);
      this.viedoLoadFinsh = true;
    }
  },
  computed: {},
  methods: {
    getloveMsg() {
      if (this.msgs.length === 0) {
        return "æˆ‘æœ‰ç‚¹å›°äº†&#128564ï¼Œä½ ä¹Ÿè¦æ—©ç¡å“¦ï¼Œæ™šå®‰ğŸˆ";
      }
      return this.msgs.shift();
    },
    loveIt() {
      this.loveCount++;
      this.shakeHand = true;
      setTimeout(() => {
        this.shakeHand = false;
      }, 1000);
    },
    interact() {
      this.$notify({
        message: this.getloveMsg(),
        dangerouslyUseHTMLString: true,
        duration: "750",
      });
    },
    viewInfo() {
      // $event.preventDefault()
      this.information = true;
    },
    onRefresh() {},
    validatorName(val) {
      console.log(val.length);
      return val.length < 10;
    },
    validatorEmail() {
      return this.form.email.length < 10;
    },
    validatorQQ() {
      return this.form.QQ.length < 10;
    },
    async onSubmit() {
      await axios.post(
        "http://web.iproute.cn/postapi.php",
        qs.stringify(this.form),
        {
          headers: {
            "Content-type": "application/x-www-form-urlencoded;charset=utf-8",
          },
        }
      );
    },
    async getPlay() {
      return new Promise((resolve) => {
        if (window.Aliplayer) {
          resolve(window.Aliplayer);
        } else {
          this.playTimer = setInterval(() => {
            if (window.Aliplayer) {
              resolve(window.Aliplayer);
            }
          }, 1000);
        }
      });
    },
  },
  destroyed() {},
};
</script>

<style scoped>
.container {
  height: 100%;
}

.section {
  position: relative;
  z-index: 1;
}

.avatar {
  position: absolute;
  right: 20px;
  bottom: 210px;
  display: flex;
  align-items: center;
  flex-direction: column;
}

.avatar:hover {
  cursor: pointer;
}

.love-btn {
  position: absolute;
  right: 30px;
  bottom: 116px;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 2;
  /* background: -webkit-linear-gradient(-70deg, #a2facf 0%, #64acff 100%); */
}

.desc {
  position: absolute;
  left: 10px;
  bottom: 160px;
  width: 70%;
}

.love-btn:hover {
  cursor: pointer;
}

.logo-base {
  margin-top: 8px;
  color: #fff;
}
.desc-title {
  color: #fff;
  font-weight: 500;
  font-size: 18px;
  letter-spacing: 1px;
  font-family: PingFang SC, DFPKingGothicGB-Medium, sans-serif;
}

.desc-title::before {
  content: "@";
}
.desc-title::after {
  content: "ğŸ‚";
}

.desc-content {
  margin-top: 5px;
  color: #fff;
  font-size: 14px;
  line-height: 22px;
  white-space: pre-wrap;
}
</style>